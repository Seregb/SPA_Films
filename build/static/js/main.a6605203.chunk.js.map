{"version":3,"sources":["components/Pagination/index.jsx","components/Posts/index.jsx","App.jsx","index.js"],"names":["Nav","styled","nav","Button","button","Pagination","total","limit","page","setPage","numPages","Math","ceil","onClick","disabled","Array","fill","map","_","i","Posts","useState","posts","setPosts","setLimit","comment","setComment","offset","commentHandler","e","id","target","el","commentaries","push","length","shift","useEffect","fetch","then","res","json","data","arr","fixedPosts","movies","lastSymb","description_full","indexOf","substring","input","console","log","className","type","value","onChange","Number","slice","title","large_cover_image","url","year","genres","href","src","alt","placeholder","GlobalStyle","createGlobalStyle","App","rootElement","document","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.a6605203.chunk.js","sourcesContent":["import styled from \"styled-components\";\n\nfunction Pagination({ total, limit, page, setPage }) {\n  const numPages = Math.ceil(total / limit);\n\n  return (\n    <>\n      <Nav>\n        <Button onClick={() => setPage(page - 1)} disabled={page === 1}>\n          &lt;\n        </Button>\n        {Array(numPages)\n          .fill()\n          .map((_, i) => (\n            <Button\n              key={i + 1}\n              onClick={() => setPage(i + 1)}\n              aria-current={page === i + 1 ? \"page\" : null}\n            >\n              {i + 1}\n            </Button>\n          ))}\n        <Button onClick={() => setPage(page + 1)} disabled={page === numPages}>\n          &gt;\n        </Button>\n      </Nav>\n    </>\n  );\n}\n\nconst Nav = styled.nav`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 4px;\n  margin: 16px;\n`;\n\nconst Button = styled.button`\n  border: none;\n  border-radius: 8px;\n  padding: 8px;\n  margin: 0;\n  background: black;\n  color: white;\n  font-size: 1rem;\n\n  &:hover {\n    background: tomato;\n    cursor: pointer;\n    transform: translateY(-2px);\n  }\n\n  &[disabled] {\n    background: grey;\n    cursor: revert;\n    transform: revert;\n  }\n\n  &[aria-current] {\n    background: deeppink;\n    font-weight: bold;\n    cursor: revert;\n    transform: revert;\n  }\n`;\n\nexport default Pagination;\n","import { useState, useEffect } from \"react\";\nimport Pagination from \"../Pagination\";\nimport \"./index.css\";\n\nfunction Posts() {\n  const [posts, setPosts] = useState([]);\n  const [limit, setLimit] = useState(4);\n  const [page, setPage] = useState(1);\n  const [comment, setComment] = useState(\"\");\n  const offset = (page - 1) * limit;\n\n\n  function fixLengthDescription(arr) {\n    arr.map((el) => {\n      const length = 420;\n      const lastSymb = el.description_full.indexOf(\" \", length);\n      if (lastSymb > 0) {\n        el.description_full =\n          el.description_full.substring(\n            0,\n            lastSymb === -1 ? length : lastSymb\n          ) + \"...\";\n      }\n      el.commentaries = [];\n      el.input = '';\n      return el;\n    });\n    return arr;\n  }\n\n  function commentHandler(e) {\n    const { id } = e.target;\n    posts.map((el) => {\n      if (el.id == id) {\n        el.commentaries.push(comment);\n        if (el.commentaries.length > 4) {\n          el.commentaries.shift();\n        }\n      }\n      return el;\n    });\n    setPosts(posts);\n    setComment(\"\");\n  }\n\n  useEffect(() => {\n    fetch(\"https://yts.mx/api/v2/list_movies.json\")\n      .then((res) => res.json())\n      .then((data) => {\n        const fixedPosts = fixLengthDescription(data.data.movies);\n        console.log(fixedPosts);\n        setPosts(fixedPosts);\n      });\n  }, []);\n\n  return (\n    <div className=\"container\">\n      <header>\n        <h1>Фильмы</h1>\n      </header>\n\n      <label>\n        Сколько фильмов на странице:&nbsp;\n        <select\n          type=\"number\"\n          value={limit}\n          onChange={({ target: { value } }) => setLimit(Number(value))}\n        >\n          <option value=\"4\">4</option>\n          <option value=\"10\">10</option>\n          <option value=\"25\">25</option>\n          <option value=\"50\">50</option>\n        </select>\n      </label>\n\n      <main>\n        {posts\n          .slice(offset, offset + limit)\n          .map(\n            ({\n              id,\n              title,\n              description_full,\n              large_cover_image,\n              url,\n              commentaries,\n              year,\n              genres\n            }) => (\n              <div key={id} className=\"card\">\n                <h3>\n                  <a href={url}>{title} {`(${year} / ${genres.map(el => el)})`}</a>\n                </h3>\n                <div className=\"textRange\">\n                  <a href={url}>\n                    <img\n                      src={large_cover_image}\n                      className=\"img\"\n                      alt=\"poster\"\n                    ></img>\n                  </a>\n                  <div className=\"text\">\n                    <p>{description_full}</p>\n                    <div className=\"commentBox\">\n                      {commentaries.map((el) => {\n                        return <div className=\"comment\">{el}</div>;\n                      })}\n                      <div className=\"inputDiv\">\n                        <input\n                          id={id}\n                          type=\"text\"\n                          placeholder=\"Оставить комментарий\"\n                          value={comment}\n                          onChange={(e) => setComment(e.target.value)}\n                        />\n                        <button id={id} onClick={commentHandler}>\n                          Отправить\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )\n          )}\n      </main>\n\n      <footer>\n        <Pagination\n          total={posts.length}\n          limit={limit}\n          page={page}\n          setPage={setPage}\n        />\n      </footer>\n    </div>\n  );\n}\n\nexport default Posts;\n","import { createGlobalStyle } from \"styled-components\";\nimport Posts from \"../src/components/Posts\";\n\nfunction App() {\n  return (\n    <>\n      <GlobalStyle />\n      <Posts />\n    </>\n  );\n}\n\nconst GlobalStyle = createGlobalStyle`\n  body {\n    font-family: sans-serif;\n    background-color: rgba(77, 77, 77);\n  }\n\n  select {\n  -moz-appearance: none;\n  -webkit-appearance: none;\n  appearance: none;\n  \n  font-family: sans-serif;\n  font-size: 1rem;\n  font-weight: 400;\n  line-height: 1.5;\n  \n  color: #444;\n  background-color: #fff;\n  \n  padding: .6em 1.4em .5em .8em;\n  margin: 0;\n  \n  border: 1px solid #aaa;\n  border-radius: .5em;\n  box-shadow: 0 1px 0 1px rgba(0,0,0,.04);\n}\n\nselect:hover {\n  border-color: #888;\n}\n\nselect:focus {\n  border-color: #aaa;\n  box-shadow: 0 0 1px 3px rgba(59, 153, 252, .7);\n  box-shadow: 0 0 0 3px -moz-mac-focusring;\n  color: #222;\n  outline: none;\n}\n\nselect:disabled {\n  opacity: 0.5;\n}\n`;\n\nexport default App;\n","import { StrictMode } from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}